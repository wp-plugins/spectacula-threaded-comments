(function(a){a.fn.autogrow=function(b){this.filter("textarea").each(function(){var d=a(this),c=d.height(),f=a("<div></div>").css({top:"-1000em",left:"-1000em",zIndex:200,width:a(this).width()-parseInt(d.css("paddingLeft"))-parseInt(d.css("paddingRight")),resize:"none",position:"absolute",wordWrap:"break-word",fontSize:d.css("fontSize"),fontFamily:d.css("fontFamily"),lineHeight:d.css("lineHeight"),lineHeight:d.css("lineHeight"),letterSpacing:d.css("letterSpacing")}).appendTo(document.body),e=function(){var h=function(j,m){for(var k=0,l="";k<m;k++){l+=j}return l},g=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(i){return h("&nbsp;",i.length-1)+" "});f.html(g);a(this).css("height",Math.max(f.height()+20,c))};a(this).change(e).keyup(e).keydown(e);e.apply(this)});return this}})(jQuery);